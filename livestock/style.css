/* Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

/* --- BIẾN SỐ TRUNG TÂM --- */
:root {
    --primary-color: #4CAF50;
    --green-dark: #388E3C;
    --green-light: #E8F8EF;
    --secondary-color: #8D6E63;
    --text-dark: #34495E;
    --text-light: #ECF0F1;
    --card-background: rgba(255, 255, 255, 0.9);
    --shadow-light: rgba(0, 0, 0, 0.08);
    --shadow-medium: rgba(0, 0, 0, 0.12);
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --hunger-color: #F39C12;
    --thirst-color: #3498DB;
    --health-color: #E74C3C;
    --happiness-color: #9B59B6;
    --quality-color: #F1C40F;
    --transition-smooth: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

/* --- THIẾT LẬP CƠ BẢN --- */
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Poppins', sans-serif; min-height: 100vh; display: flex; justify-content: center; align-items: center; padding: 20px; color: var(--text-dark); transition: background 2s ease-in-out; }

/* --- NỀN THEO THỜI GIAN --- */
.time-sáng   { background: linear-gradient(135deg, #81D4FA, #B3E5FC); }
.time-trưa    { background: linear-gradient(135deg, #4FC3F7, #81D4FA); }
.time-chiều   { background: linear-gradient(135deg, #FFB74D, #FFD54F); }
.time-tối     { background: linear-gradient(135deg, #607D8B, #90A4AE); color: var(--text-light); }
.time-đêm   { background: linear-gradient(135deg, #263238, #37474F); color: var(--text-light); }

.hidden { display: none !important; }

/* --- MÀN HÌNH CHÀO MỪNG & KẾT THÚC --- */
.welcome-screen, .game-over { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; z-index: 200; backdrop-filter: blur(8px); }
.game-over { display: none; }
.welcome-content { background: rgba(255, 255, 255, 0.95); padding: 30px 40px; border-radius: var(--border-radius-lg); max-width: 960px; width: 95%; box-shadow: 0 12px 40px rgba(0,0,0,0.25); max-height: 90vh; overflow-y: auto; border-radius: 30px;}
.welcome-content h2 { font-size: 2.5rem; font-weight: 700; text-align: center; color: var(--green-dark); margin-bottom: 15px;}
.game-over-content { background: rgba(255, 255, 255, 0.95); padding: 40px; border-radius: var(--border-radius-lg); width: 95%; box-shadow: 0 12px 40px rgba(0,0,0,0.25); max-height: 90vh; overflow-y: auto; max-width: 550px; text-align: center; border-top: 6px solid var(--primary-color); animation: popup 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
@keyframes popup { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
.game-over-content h2 { font-size: 2.2rem; text-shadow: 0 2px 4px rgba(0,0,0,0.1); }

/* --- GIAO DIỆN CHÍNH --- */
#game-container { max-width: 1200px; width: 100%; }
h1 { text-align: center; color: var(--green-dark); margin-bottom: 20px; font-size: 2.8rem; text-shadow: 0 2px 4px var(--shadow-light); }
body.time-tối h1, body.time-đêm h1 { color: var(--text-light); }
.stats-header { 
    display: flex; 
    justify-content: space-around; 
    flex-wrap: wrap; 
    gap: 10px; 
    margin-bottom: 20px; 
    padding: 12px; 
    background: var(--card-background); 
    border-radius: 50px; 
    box-shadow: 0 4px 15px var(--shadow-light); 
    font-size: 1.1rem;
}
#day-display, #game-time, #money-display, #difficulty-display { font-weight: 600; padding: 8px 18px; border-radius: 30px; background-color: var(--green-light); font-size: 1.1rem; }
.container { background: var(--card-background); border-radius: var(--radius-lg); box-shadow: 0 8px 32px var(--shadow-medium); padding: 25px; }
.side-info-group { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 25px; margin-bottom: 25px; }
.info-box { background-color: #fff; padding: 20px; border-radius: var(--border-radius-md); text-align: center; box-shadow: 0 4px 12px var(--shadow-light); border-top: 4px solid var(--primary-color); transition: var(--transition-smooth); }
.info-box:hover { transform: translateY(-8px); box-shadow: 0 10px 25px var(--shadow-medium); }
.info-box h3 { font-size: 0.9rem; color: #7f8c8d; margin-bottom: 15px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }

/* Cải tiến: Làm rõ thông tin về Thời tiết và Cảm xúc của Bò */
.weather-icon, .cow-feeling-icon {
    font-size: 3rem;
    margin-bottom: 5px;
}

.weather-text, .cow-feeling-text {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--text-dark);
}

.game-area { display: grid; grid-template-columns: 1fr 1.2fr; gap: 25px; }
.farm-area { border-radius: var(--border-radius-md); display: flex; align-items: center; justify-content: center; background: linear-gradient(to top, #E8F8EF, #ffffff); min-height: 400px; }
.cow { max-width: 85%; max-height: 85%; object-fit: contain; filter: drop-shadow(0 5px 15px rgba(0,0,0,0.15)); }
.stats-area { background-color: #fff; border-radius: var(--border-radius-md); padding: 25px; box-shadow: 0 4px 12px var(--shadow-light); display: flex; flex-direction: column; }
.stat { margin-bottom: 18px; display: grid; grid-template-columns: 100px 1fr; align-items: center; gap: 15px; }
.stat-label { font-weight: 600; font-size: 0.95rem; }
.stat-bar { height: 20px; background-color: #ECF0F1; border-radius: 10px; overflow: hidden; box-shadow: inset 0 2px 4px rgba(0,0,0,0.05); }
.stat-fill { height: 100%; border-radius: 10px; transition: width 0.8s cubic-bezier(0.25, 1, 0.5, 1); background-image: linear-gradient(45deg, rgba(255,255,255,0.2) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.2) 75%, transparent 75%, transparent); background-size: 40px 40px; animation: animate-stripes 2s linear infinite; }
@keyframes animate-stripes { from { background-position: 40px 0; } to { background-position: 0 0; } }
.hunger .stat-fill { background-color: var(--hunger-color); } .thirst .stat-fill { background-color: var(--thirst-color); } .health .stat-fill { background-color: var(--health-color); } .happiness .stat-fill { background-color: var(--happiness-color); } .quality .stat-fill { background-color: var(--quality-color); }
@keyframes warning-flash { 50% { background-color: #e74c3c; box-shadow: 0 0 12px #e74c3c; } }
.stat.low-stat .stat-fill { animation: warning-flash 1.2s infinite ease-in-out; }

/* --- KHUNG THÔNG BÁO TRẠNG THÁI (VỊ TRÍ MỚI) --- */
.game-info { margin: 20px 0; padding: 15px 0; background-color: transparent; border-top: 2px dashed #f0f0f0; border-bottom: 2px dashed #f0f0f0; text-align: center; }
.message { font-size: 1.15rem; font-weight: 600; color: var(--text-dark); min-height: 30px; font-style: italic; }

/* --- NÚT HÀNH ĐỘNG (THIẾT KẾ LẠI) --- */
.actions { 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); 
    gap: 15px; 
    margin-top: auto; 
}
/* THAY ĐỔI: Chỉnh sửa để nút "Tiếp Tục" hiển thị đúng vị trí */
.actions .next-hour-btn {
    grid-column: 1 / -1; /* Mở rộng toàn bộ chiều rộng */
    background-color: var(--primary-color);
    box-shadow: 0 4px 0 var(--green-dark);
}
.action-btn { padding: 15px 10px; border: none; border-radius: var(--radius-md); font-size: 0.95rem; font-weight: 600; cursor: pointer; transition: var(--transition-smooth); color: #fff; background-color: #BDC3C7; box-shadow: 0 4px 0 #95A5A6; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 10px; }
.action-btn:hover:not(:disabled) { transform: translateY(-4px); box-shadow: 0 6px 0 #7F8C8D, 0 8px 15px var(--shadow-medium); }
.action-btn:active:not(:disabled) { transform: translateY(1px); box-shadow: 0 2px 0 #95A5A6; }
.action-btn:disabled { opacity: 0.6; cursor: not-allowed; background-color: #E0E0E0 !important; color: #9E9E9E !important; box-shadow: 0 4px 0 #BDBDBD; }
.action-btn span { font-size: 2.2rem; line-height: 1; }
.action-btn.feed { background-color: var(--hunger-color); box-shadow: 0 4px 0 #D35400;} .action-btn.water { background-color: var(--thirst-color); box-shadow: 0 4px 0 #2980B9;} .action-btn.medicine { background-color: var(--health-color); box-shadow: 0 4px 0 #C0392B;} .action-btn.play { background-color: var(--happiness-color); box-shadow: 0 4px 0 #8E44AD;} .action-btn.work { background-color: var(--primary-color); box-shadow: 0 4px 0 var(--green-dark);} .action-btn.exit { background-color: #795548; box-shadow: 0 4px 0 #5D4037;} .action-btn.feed-stop, .action-btn.water-stop { background-color: #E74C3C; box-shadow: 0 4px 0 #C0392B; }
.action-pair { display: flex; gap: 10px; grid-column: 1 / -1; } .action-pair .action-btn { flex: 1; }

/* --- BỘ ĐIỀU KHIỂN NHIỆT ĐỘ --- */
.control-pair { display: flex; }
.control-pair .action-btn { flex: 1; margin: 0; border: 1px solid #bdc3c7; background-color: #ecf0f1; color: var(--text-dark); font-size: 0.9rem; padding: 8px; box-shadow: none; flex-direction: row; }
.control-pair .action-btn:first-child { border-radius: var(--radius-sm) 0 0 var(--radius-sm); border-right-width: 0.5px; } .control-pair .action-btn:last-child { border-radius: 0 var(--radius-sm) var(--radius-sm) 0; border-left-width: 0.5px; }
.control-pair .action-btn:not(:disabled):hover { background-color: #dbe0e2; border-color: #a3a8ab; transform: none; box-shadow: none; }
.control-pair .action-btn:disabled { opacity: 1; }
.control-pair button[data-action="heatOn"]:disabled { background-color: #f39c12; border-color: #e67e22; color: white; }
.control-pair button[data-action="fanOn"]:disabled { background-color: #3498db; border-color: #2980b9; color: white; }

/* --- CSS MÀN HÌNH CHỌN BÒ & ĐỘ KHÓ --- */
.breed-selection { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
.breed-card { 
    border: 1px solid #ddd; 
    border-radius: var(--radius-md); 
    padding: 20px; 
    text-align: center; 
    background-color: #fff; 
    display: flex; 
    flex-direction: column; 
    transition: var(--transition-smooth); 
    box-shadow: 0 2px 5px var(--shadow-light); 
}
.breed-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px var(--shadow-medium); border-color: var(--primary-color); }
.breed-card img { width: 100%; height: 150px; object-fit: contain; border-radius: var(--radius-sm); margin-bottom: 15px; }
.breed-card h3 { color: var(--secondary-color); } 
.breed-card .breed-desc { font-size: 1rem; color: #666; flex-grow: 1; margin-bottom: 15px; line-height: 1.5; }
.breed-select-btn { width: 100%; padding: 15px; border: none; border-radius: var(--radius-sm); color: white; font-weight: 700; cursor: pointer; font-size: 1rem; text-transform: uppercase; letter-spacing: 0.5px; background-color: var(--primary-color); box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); transition: all 0.2s ease-in-out; }
.breed-select-btn:hover { background-color: var(--green-dark); box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2); transform: scale(1.05); }
#difficulty-selection-step { text-align: center; }
.difficulty-selection { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 30px 0; }
.difficulty-select-btn { padding: 20px; font-size: 1rem; font-weight: 600; border: 2px solid var(--primary-color); border-radius: var(--radius-sm); background-color: transparent; color: var(--primary-color); cursor: pointer; transition: all 0.2s ease-in-out; }
.difficulty-select-btn:hover { background-color: var(--primary-color); color: white; transform: translateY(-3px); }
.difficulty-select-btn[data-difficulty-id="5"] { border-color: var(--secondary-color); color: var(--secondary-color); }
.difficulty-select-btn[data-difficulty-id="5"]:hover { background-color: var(--secondary-color); color: white; }
.back-btn { background: none; border: none; color: #777; cursor: pointer; font-weight: 600; margin-top: 20px; }

/* --- CSS MÀN HÌNH KẾT THÚC --- */
#game-over-reason { background-color: #f9f9f9; border: 1px solid #e7e7e7; border-radius: var(--radius-md); padding: 20px; margin: 25px 0; text-align: left; line-height: 2.2; font-size: 0.95rem; }
#game-over-reason strong { float: right; font-size: 1rem; }
#game-over-reason span { display: block; text-align: center; font-size: 1.8rem !important; font-weight: 700; margin-top: 15px; padding-top: 15px; border-top: 2px dashed #ccc; }
#game-advice { margin-top: 20px; padding: 20px; text-align: left; background-color: var(--green-light); border-radius: var(--radius-md); } #game-advice h4 { text-align: center; color: var(--green-dark); margin-bottom: 10px; font-style: normal; }
.game-over-actions { display: flex; justify-content: center; gap: 15px; margin-top: 25px; flex-wrap: wrap; }
.restart-btn { padding: 15px 40px; border: none; border-radius: 50px; font-size: 1.1rem; font-weight: 700; color: white; cursor: pointer; text-decoration: none; text-transform: uppercase; letter-spacing: 1px; background-color: var(--primary-color); box-shadow: 0 5px 0 var(--green-dark); transition: all 0.15s ease-in-out; }
.restart-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 0 var(--green-dark); }
.restart-btn:active { transform: translateY(2px); box-shadow: 0 3px 0 var(--green-dark); }
.restart-btn.exit-btn { background-color: var(--secondary-color); box-shadow: 0 5px 0 #5D4037; }
.restart-btn.exit-btn:hover { transform: translateY(-3px); background-color: #6D4C41; box-shadow: 0 8px 0 #5D4037; }
.restart-btn.exit-btn:active { transform: translateY(2px); box-shadow: 0 3px 0 #5D4037; }

/* --- RESPONSIVE --- */
@media (max-width: 960px) {
    .game-area { grid-template-columns: 1fr; }
    .breed-selection { grid-template-columns: 1fr; }
}